/*! co.blackagency.whatsnext 27-01-2016 */
"use strict";_.templateSettings.variable="TD",Date.prototype.addHours=function(h){return this.setHours(this.getHours()+h),this},Date.prototype.subHours=function(h){return this.setHours(this.getHours()-h),this},Date.prototype.addMinutes=function(m){return this.setMinutes(this.getMinutes()+m),this},Date.prototype.subMinutes=function(m){return this.setMinutes(this.getMinutes()-m),this},Date.prototype.addSeconds=function(s){return this.setSeconds(this.getSeconds()+s),this},Date.prototype.subSeconds=function(s){return this.setSeconds(this.getSeconds()-s),this},Date.prototype.toUTC=function(){return moment&&this.setMinutes(this.getMinutes()+moment().utcOffset()),this};var meta={keys:{parse:{ApplicationID:"6EGKiJSZgvWOGpzHdJsxDfTJgLCIwMCFrn9WnLF7",JavascriptKey:"OaY803d3UixwhcgxgTFn8Agl7vdLECMXepArLOiv"}},userP:{},userLastSyncAt:new Date(2e3,1,1),deviceReady:!1,deviceOnline:!1},touch={addE:function(){return $.Deferred(function(f){$(".touchable").on("mousedown touchstart",function(){$(".touched").removeClass("touched"),$(this).addClass("touched")}),$(".touchable").on("mouseup touchend touchcancel",function(){$(".touched").removeClass("touched")}),f.resolve()}).promise()},remE:function(){return $.Deferred(function(f){$(".touchable").off("mousedown touchstart"),$(".touchable").off("mouseup touchend touchcancel"),f.resolve()}).promise()},initialize:function(){touch.remE().done(touch.addE)},reset:function(){touch.remE().done(touch.addE)}},app={initialize:function(){console.log("App init"),Parse.initialize(meta.keys.parse.ApplicationID,meta.keys.parse.JavascriptKey),app.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1),document.addEventListener("online",function(){meta.deviceOnline=!0},!1),document.addEventListener("offline",function(){meta.deviceOnline=!1},!1)},onDeviceReady:function(){console.log("Device is ready"),meta.deviceReady=!0,"ios"==device.platform.toLowerCase(),views.initialize(),touch.initialize()},l:function(content,type){var s="";"string"==typeof content?s=content:"object"==typeof content&&(s=JSON.stringify(content,null,"")),"undefined"==typeof type?console.log(s):1==type?console.log(s):2==type?console.warn(s):3==type&&console.error(s)}},views={initialize:function(screen){console.log("View init"),$("body").css("background-color","#000"),Parse.User.current()?Parse.User.current().fetch({success:function(r){console.log("Refreshed local Current User data"),"undefined"!=typeof Parse.User.current().get("avatar")?(console.log("loading avatars"),$("avatar.user").css("background-image","url("+Parse.User.current().get("avatar").url()+")"),views.screens.start.initialize()):views.screens.start.initialize()},error:function(e){console.error("Could not refresh User object, application aborted."),console.error(e),Parse.User.logOut(),views.screens.login.initialize()}}):views.screens.login.initialize()},screens:{login:{initialize:function(){},getData:function(){},render:function(){},addE:function(){},remE:function(){}},signup:{initialize:function(){},getData:function(){},render:function(){},addE:function(){},remE:function(){}},accounts:{initialize:function(){},getData:function(){},render:function(){},addE:function(){},remE:function(){}},accountDetail:{initialize:function(){},getData:function(){},render:function(){},addE:function(){},remE:function(){}}}},util={};